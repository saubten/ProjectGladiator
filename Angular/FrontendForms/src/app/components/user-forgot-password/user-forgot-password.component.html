<h1 class="text-center">Forgot Password</h1>

<div class="container">
    <form [formGroup]="forgotpasswordform">
        <p class="text-info">Enter the regirstration number you received when you registered.</p>
        <div class="form-group mb-2">
            <label>Registration Number:</label>
            <input class="form-control" id="userId" type="number" formControlName="userId" placeholder="Registration Number"/>
            <div *ngIf="!forgotpasswordform.get('userId')?.valid && (forgotpasswordform.get('userId')?.dirty || forgotpasswordform.get('userId')?.touched) "
            class="has-error">
                <div *ngIf="forgotpasswordform.get('userId')?.errors?.required"  >
                    <small class="text-danger">Registration number is required</small>
                </div>
            </div>    
        </div>
        <div class="form-group mb-2">
            <label>Registered Email Id:</label>
            <input class="form-control" id="useremail" type="email" formControlName="useremail" placeholder="Registration Email"/>
            <div *ngIf="!forgotpasswordform.get('useremail')?.valid && (forgotpasswordform.get('useremail')?.dirty || forgotpasswordform.get('useremail')?.touched) "
            class="has-error">
                <div *ngIf="forgotpasswordform.get('useremail')?.errors?.required"  >
                    <small class="text-danger">Email is required</small>
                </div>
            </div>    
        </div>

        <div class="form-group mb-2">
            <label>New Password:</label>
            <input class="form-control" id="fpassword" type="password" formControlName="fpassword" placeholder="Enter New Password"/>
            <div *ngIf="!forgotpasswordform.get('fpassword')?.valid && (forgotpasswordform.get('fpassword')?.dirty || forgotpasswordform.get('fpassword')?.touched) "
            class="has-error">
            <div *ngIf="!forgotpasswordform.get('fpassword')?.valid && (forgotpasswordform.get('fpassword')?.dirty || forgotpasswordform.get('fpassword')?.touched) "class="alert alert-danger">
                <div *ngIf="forgotpasswordform.get('fpassword')?.errors?.required"><small class="text-danger">Password is required</small></div>
                <div *ngIf="forgotpasswordform.get('fpassword')?.errors?.minlength"><small class="text-danger">Password must be at least 6 characters</small></div>
                <div *ngIf="forgotpasswordform.get('fpassword')?.errors?.maxlength"><small class="text-danger">Username must not exceed 20 characters</small></div>
                <div *ngIf="forgotpasswordform.get('fpassword')?.errors?.pattern" ><small class="text-danger"><ul>Password Must contain<li>One character</li>
                <li>One number</li><li>One special character</li><li>One Capital Character</li></ul></small></div>
            </div>
            </div>    
        </div>
    </form>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop" [disabled]="forgotpasswordform.invalid" (click)="GetOTP()" >Get OTP</button>
</div>

  
  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form [formGroup] = "otpform">
                <div class="form-group mb-2">
                        <p class="text-info">Enter the OTP sent to your registered email address.</p>
                        <label>OTP:</label>
                        <input class="form-control" id="fotp" type="password" formControlName="fotp" placeholder="Enter OTP"/>
                        <div *ngIf="!otpform.get('fotp')?.valid && (otpform.get('fotp')?.dirty || otpform.get('fotp')?.touched)"
                        class="has-error">
                            <div *ngIf="otpform.get('fotp')?.errors?.required"  >
                                <small class="text-danger">OTP is required</small>
                            </div>
                        </div> 
                </div>
            </form>   
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal" [disabled] = "otpform.invalid" (click)="VerifyOTP()">Verify OTP</button>
        </div>
      </div>
    </div>
  </div>


    